<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Validation - NexaSQL</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        pre { background: #f8f9fa; padding: 15px; border-radius: 5px; overflow-x: auto; }
        .loading { color: #666; }
    </style>
</head>
<body>
    <h1>üîç Blog Validation Tool</h1>
    <p>This tool checks if your blog setup is working correctly.</p>

    <div id="results">
        <div class="loading">‚è≥ Running validation checks...</div>
    </div>

    <script>
        async function validateBlog() {
            const results = document.getElementById('results');
            results.innerHTML = '';

            // Test 1: Check if posts/index.json exists
            try {
                const indexResponse = await fetch('posts/index.json');
                if (indexResponse.ok) {
                    const indexData = await indexResponse.json();
                    addResult('success', `‚úÖ Posts index found with ${indexData.posts.length} posts`);

                    // Test 2: Check each post file
                    let validPosts = 0;
                    for (const slug of indexData.posts) {
                        try {
                            const postResponse = await fetch(`posts/${slug}.json`);
                            if (postResponse.ok) {
                                const postData = await postResponse.json();
                                if (postData.title && postData.content) {
                                    validPosts++;
                                } else {
                                    addResult('error', `‚ùå Post ${slug}.json is missing title or content`);
                                }
                            } else {
                                addResult('error', `‚ùå Post ${slug}.json not found (${postResponse.status})`);
                            }
                        } catch (error) {
                            addResult('error', `‚ùå Error loading ${slug}.json: ${error.message}`);
                        }
                    }
                    addResult('success', `‚úÖ ${validPosts}/${indexData.posts.length} posts loaded successfully`);

                } else {
                    addResult('error', '‚ùå posts/index.json not found');
                }
            } catch (error) {
                addResult('error', `‚ùå Error loading posts index: ${error.message}`);
            }

            // Test 3: Check main app.js functionality
            if (typeof window.NexaSQLBlog !== 'undefined') {
                addResult('success', '‚úÖ Main blog JavaScript loaded correctly');
            } else {
                addResult('error', '‚ùå Main blog JavaScript not loaded');
            }

            // Test 4: Check if we're running on a server
            if (window.location.protocol === 'file:') {
                addResult('info', '‚ö†Ô∏è Running from file:// - some features may not work. Use a local server for testing.');
            } else {
                addResult('success', `‚úÖ Running on server: ${window.location.origin}`);
            }
        }

        function addResult(type, message) {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.innerHTML = message;
            results.appendChild(div);
        }

        // Run validation when page loads
        document.addEventListener('DOMContentLoaded', validateBlog);
    </script>

    <h2>Manual Checks</h2>
    <ul>
        <li>‚úÖ Check that <code>index.html</code> loads correctly</li>
        <li>‚úÖ Click on article links to test <code>post.html?slug=...</code></li>
        <li>‚úÖ Test search functionality</li>
        <li>‚úÖ Test category filtering</li>
        <li>‚úÖ Test mobile responsiveness</li>
    </ul>

    <h2>Next Steps</h2>
    <ol>
        <li>If all tests pass, push to GitHub</li>
        <li>Enable GitHub Pages in repository settings</li>
        <li>Wait 5-10 minutes for deployment</li>
        <li>Test the live site</li>
        <li>Add your first new article!</li>
    </ol>
</body>
</html>